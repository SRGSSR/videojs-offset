/*! videojs-offset - v0.5.1 - 2017-04-28*/

!function(a,b){"use strict";var c=b.getComponent("Flash"),d=b.getComponent("Html5");c.prototype.supportsStarttime=function(){return!0},c.prototype.starttime=function(a){void 0!==a&&a>0&&(this.seekable().length?this.setCurrentTime(a):setTimeout(this.starttime.bind(this,a),10))},d.prototype.supportsStarttime=function(){return!1},b.plugin("offset",function(a){var b=a.start,c=a.end,d=a.starttime,e=this,f={buffered:e.buffered,duration:e.duration,currentTime:e.currentTime,ended:e.ended,handleTechReady_:e.handleTechReady_},g=function(a,b){return a>=b||void 0===a||void 0===b};this.resetOffset_=function(a,b){this.offset_={start:a,end:b,duration:void 0!==a&&void 0!==b?b-a:void 0,ended:!1}},this.applyStarttime_=function(){void 0!==this.starttime_&&(this.techGet_("supportsStarttime")?this.techCall_("starttime",this.starttime_+(this.offset_?this.offset_.start:0)):this.one("timeupdate",function(){this.offset_?0===this.starttime_&&0===this.offset_.start||this.currentTime(this.starttime_):0!==this.starttime_&&this.currentTime(this.starttime_)}))},this.starttime=function(a){if(void 0===a)return this.starttime_;this.starttime_=a,this.applyStarttime_()},this.offset=function(a,b,c){g(a,b)?(this.offset_=void 0,void 0!==c&&this.starttime(c)):(this.resetOffset_(a,b),this.starttime(void 0!==c?c:0))},this.buffered=function(){var a=f.buffered.call(this);return this.offset_&&a&&a.length>0?{length:a.length,_buffer:a,_offset:this.offset_,start:function(a){var b=this._buffer.start(a)-this._offset.start;return b<0?0:b},end:function(a){var b=this._buffer.end(a)-this._offset.start;return b>this._offset.end?this._offset.end:b}}:a},this.duration=function(a){if(this.offset_&&void 0===a){var b=f.duration.call(this);return b<this.offset_.end?b-this.offset_.start:this.offset_.duration}if(void 0===a)return f.duration.call(this);f.duration.call(this,a)},this.currentTime=function(a){if(this.offset_){if(void 0===a){var b=f.currentTime.call(this)-this.offset_.start;return b<0?0:b}var c=a+this.offset_.start;f.currentTime.call(this,c>this.offset_.end?this.offset_.end:c)}else{if(void 0===a)return f.currentTime.call(this);f.currentTime.call(this,a)}},this.ended=function(){return this.offset_?this.offset_.ended:f.ended.call(this)},this.handleTechReady_=function(){this.offset(b,c,d),f.handleTechReady_.call(this)},this.on("timeupdate",function(){this.offset_&&(this.currentTime()>=this.offset_.duration?(this.pause(),this.offset_.ended=!0,this.trigger("ended")):this.offset_.ended=!1)}.bind(this))})}(window,window.videojs);